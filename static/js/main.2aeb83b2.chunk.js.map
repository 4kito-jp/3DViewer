{"version":3,"sources":["Viewer.js","BottomNav.js","TopNav.js","TategakiCard.js","App.js","serviceWorker.js","index.js"],"names":["Viewer","props","emitter","addListener","camera","position","set","lookAt","counter","mode","rendering","myWidth","window","innerWidth","myHeight","innerHeight","renderer","THREE","antialias","setPixelRatio","devicePixelRatio","setSize","gammaInput","gammaOutput","controls","OrbitControls","domElement","rotateSpeed","API","lightProbeIntensity","directionalLightIntensity","diffuse","emissiveIntensity","envMapIntensity","specular","reflectivity","shininess","scene","draw","render","x","Math","cos","z","sin","y","requestAnimationFrame","this","minDistance","maxDistance","enablePan","autoRotate","lightProbe","add","dirLight","directionalLight","push","i","length","prefix","postfix","urls","process","load","cubeTexture","encoding","copy","LightProbeGenerator","fromCubeTexture","STLLoader","geometry","geom","mat","sphere","material","color","emissive","envMap","mesh","scale","mount","appendChild","ref","Component","BottomNav","state","active","handleNext","bind","handleBack","setState","emit","open","MobileStepper","variant","steps","activeStep","nextButton","Button","onClick","disabled","backButton","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","TopNav","classes","className","AppBar","Toolbar","Typography","TategakiCard","class","App","EventEmitter","style","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.2aeb83b2.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\nimport { LightProbeGenerator } from 'three/examples/jsm/lights/LightProbeGenerator.js';\r\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js';\r\n\r\nclass Viewer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.emitter = this.props.emitter\r\n    this.emitter.addListener(\r\n      'what_is_kaendoki', () => {\r\n        this.camera.position.set(10, -9, 10);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"what_is_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'joumon_culture', () => {\r\n        this.camera.position.set(10, -9, 10);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"what_is_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'village_of_joumon', () => {\r\n        this.camera.position.set(10, -9, 10);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"what_is_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'differences_of_kaendoki', () => {\r\n        this.camera.position.set(10, -9, 10);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"what_is_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'feature_of_kaendoki', () => {\r\n        this.camera.position.set(9, 1, 11);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"feature_of_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'climate_of_joumon', () => {\r\n        this.camera.position.set(9, 1, 11);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"feature_of_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'art_and_kaendoki', () => {\r\n        this.camera.position.set(9, 1, 11);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"feature_of_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'village_of_joumon', () => {\r\n        this.camera.position.set(9, 1, 11);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"feature_of_kaendoki\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'default', () => {\r\n        this.camera.position.set(0, 0, 25);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter = 0.0;\r\n        this.mode = \"default\"\r\n        this.rendering();\r\n      }\r\n    )\r\n\r\n    let myWidth = window.innerWidth, myHeight = window.innerHeight - 60 * 2;\r\n\r\n\r\n    this.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    this.renderer.setPixelRatio( window.devicePixelRatio );\r\n    this.renderer.setSize( myWidth, myHeight );\r\n    this.renderer.gammaInput = true;\r\n    this.renderer.gammaOutput = true;\r\n    // this.renderer.gammaFactor = 2.2;\r\n\r\n    this.camera = new THREE.PerspectiveCamera(40, myWidth / myHeight, 1, 1000);\r\n    this.camera.position.set(0, 0, 25);\r\n\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n\r\n    this.counter = 0.0;\r\n\r\n    this.rotateSpeed = 0.0002;\r\n\r\n    this.mode = \"default\";\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    let API = {\r\n      lightProbeIntensity: 1.0,\r\n      directionalLightIntensity: 1.0,\r\n      diffuse: 0x2f1105,\r\n      emissiveIntensity: 0.0,\r\n      envMapIntensity: 16/100,\r\n      specular : 0x311607,\r\n      reflectivity: 16/100,\r\n      shininess: 35,\r\n    };\r\n\r\n\r\n    let scene = new THREE.Scene();\r\n\r\n    let draw = () => {\r\n      this.renderer.render(scene, this.camera);\r\n\r\n      if (this.mode === \"default\") {\r\n\r\n      }\r\n      else if (this.mode === \"what_is_kaendoki\"\r\n        || this.mode === \"joumon_culture\"\r\n        || this.mode === \"village_of_joumon\"\r\n      ) {\r\n        this.camera.position.x = 10 * Math.cos(this.counter);\r\n        this.camera.position.z = 10 * Math.sin(this.counter);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter += this.rotateSpeed;\r\n      }\r\n      else if (this.mode === \"feature_of_kaendoki\"\r\n        || this.mode === 'climate_of_joumon'\r\n        || this.mode === 'art_and_kaendoki') {\r\n        this.camera.position.x = 10 * Math.cos(this.counter);\r\n        this.camera.position.y = 10 * Math.sin(this.counter);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter += this.rotateSpeed;\r\n      }\r\n      else if (this.mode === 'differences_of_kaendoki'\r\n        || this.mode === 'village_of_joumon') {\r\n        this.camera.position.y = 10 * Math.cos(this.counter);\r\n        this.camera.position.z = 10 * Math.sin(this.counter);\r\n        this.camera.lookAt(0, 0, 0);\r\n        this.counter += this.rotateSpeed;\r\n      }\r\n      requestAnimationFrame(draw);\r\n    }\r\n\r\n    this.rendering = draw;\r\n\r\n    this.controls.minDistance = 10;\r\n    this.controls.maxDistance = 50;\r\n    this.controls.enablePan = false;\r\n    this.controls.autoRotate = true;\r\n\r\n    // probe\r\n    let lightProbe = new THREE.LightProbe();\r\n    scene.add( lightProbe );\r\n\r\n    // light\r\n    let directionalLight = [];\r\n    let dirLight;\r\n    dirLight = new THREE.DirectionalLight( 0xffffff, API.directionalLightIntensity );\r\n    dirLight.position.set( -10, 10, 10 );\r\n    directionalLight.push(dirLight);\r\n\r\n    dirLight = new THREE.DirectionalLight( 0xffffff, API.directionalLightIntensity );\r\n    dirLight.position.set(  10, 10, -10 );\r\n    directionalLight.push(dirLight);\r\n\r\n    for (var i = 0; i < directionalLight.length; i++) {\r\n      scene.add( directionalLight[i] );\r\n    }\r\n\r\n    // envmap\r\n    var genCubeUrls = function ( prefix, postfix ) {\r\n      return [\r\n        prefix + 'posx' + postfix, prefix + 'negx' + postfix,\r\n        prefix + 'posy' + postfix, prefix + 'negy' + postfix,\r\n        prefix + 'posz' + postfix, prefix + 'negz' + postfix\r\n      ];\r\n    };\r\n\r\n    var urls = genCubeUrls(\r\n      process.env.PUBLIC_URL + '/assets/models/kaen-doki/env/', '.jpg'\r\n    );\r\n\r\n    let envMapLoaded = (cubeTexture) => {\r\n      cubeTexture.encoding = THREE.sRGBEncoding;\r\n      lightProbe.copy( LightProbeGenerator.fromCubeTexture( cubeTexture ) );\r\n\r\n      // 3Dモデルのロード\r\n      var loader = new STLLoader();\r\n      loader.load( process.env.PUBLIC_URL + '/assets/models/kaen-doki/geo/kaendoki_model.stl', function ( geometry ) {\r\n        var material = new THREE.MeshPhongMaterial({\r\n            color: API.diffuse,\r\n            emissive: API.emissive,\r\n            emissiveIntensity: API.emissiveIntensity,\r\n            envMap: cubeTexture,\r\n            reflectivity: API.envMapIntensity,\r\n            shininess : API.shininess,\r\n            specular: API.specular,\r\n        });\r\n        let mesh = new THREE.Mesh( geometry, material );\r\n        mesh.scale.set(40,40,40);\r\n        scene.add(mesh);\r\n\r\n        // 鶏冠状把手\r\n        var geom, mat, sphere;\r\n        geom = new THREE.SphereGeometry(0.3, 32, 32);\r\n        mat = new THREE.MeshBasicMaterial( {color: 0xDD0555} );\r\n        sphere = new THREE.Mesh(geom, mat);\r\n        sphere.position.set(4.5, 5.3, -1)\r\n        scene.add( sphere );\r\n\r\n        // 鋸歯状突起\r\n        geom = new THREE.SphereGeometry(0.3, 32, 32);\r\n        mat = new THREE.MeshBasicMaterial( {color: 0x777705} );\r\n        sphere = new THREE.Mesh(geom, mat);\r\n        sphere.position.set(-4.0, 3.5, 0)\r\n        scene.add(sphere);\r\n\r\n        // Ｓ字状隆線文\r\n        geom = new THREE.SphereGeometry(0.3, 32, 32);\r\n        mat = new THREE.MeshBasicMaterial( {color: 0x057777} );\r\n        sphere = new THREE.Mesh(geom, mat);\r\n        sphere.position.set(0, -1.2, 3.5)\r\n        scene.add(sphere);\r\n\r\n\r\n        draw();\r\n      });\r\n    }\r\n\r\n    new THREE.CubeTextureLoader().load( urls, envMapLoaded );\r\n    this.mount.appendChild(this.renderer.domElement);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={ref=> (this.mount = ref)} />\r\n    )\r\n  }}\r\n\r\nexport default Viewer\r\n","import React, { Component } from 'react'\r\nimport MobileStepper from '@material-ui/core/MobileStepper';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nexport class BottomNav extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.emitter = this.props.emitter\r\n\r\n    this.state = {\r\n      active: 0\r\n    }\r\n\r\n    this.handleNext = this.handleNext.bind(this);\r\n    this.handleBack = this.handleBack.bind(this);\r\n\r\n  }\r\n\r\n  handleNext() {\r\n    this.setState({\r\n      active: this.state.active + 1\r\n    })\r\n    switch (this.state.active) {\r\n      case 0:\r\n        this.emitter.emit('what_is_kaendoki')\r\n        break\r\n      case 1:\r\n        this.emitter.emit('feature_of_kaendoki')\r\n        break\r\n      case 2:\r\n        this.emitter.emit('differences_of_kaendoki')\r\n        break\r\n      case 3:\r\n        this.emitter.emit('joumon_culture')\r\n        break\r\n      case 4:\r\n        this.emitter.emit('climate_of_joumon')\r\n        break\r\n      case 5:\r\n        this.emitter.emit('village_of_joumon')\r\n        break\r\n      case 6:\r\n        this.emitter.emit('art_and_kaendoki')\r\n        break\r\n      case 7:\r\n        this.emitter.emit('XVL')\r\n        window.open( \"http://karen.ecd.media.teu.ac.jp/3ds2xvl/c-1T7punvPgFXnnPU/index.html\", \"_blank\" ) ;\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  handleBack() {\r\n    this.setState({\r\n      active: this.state.active - 1\r\n    })\r\n    switch (this.state.active) {\r\n      case 1:\r\n        this.emitter.emit('default')\r\n        break\r\n      case 2:\r\n        this.emitter.emit('what_is_kaendoki')\r\n        break\r\n      case 3:\r\n        this.emitter.emit('feature_of_kaendoki')\r\n        break\r\n      case 4:\r\n        this.emitter.emit('differences_of_kaendoki')\r\n        break\r\n      case 5:\r\n        this.emitter.emit('joumon_culture')\r\n        break\r\n      case 6:\r\n        this.emitter.emit('climate_of_joumon')\r\n        break\r\n      case 7:\r\n        this.emitter.emit('village_of_joumon')\r\n        break\r\n      case 8:\r\n        this.emitter.emit('art_and_kaendoki')\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <MobileStepper\r\n          variant=\"dots\"\r\n          steps={9}\r\n          position=\"static\"\r\n          activeStep={this.state.active}\r\n          nextButton={\r\n            <Button onClick={this.handleNext} disabled={this.state.active === 8}>\r\n              Next\r\n            </Button>\r\n          }\r\n          backButton={\r\n            <Button onClick={this.handleBack} disabled={this.state.active === 0}>\r\n              Back\r\n            </Button>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BottomNav","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport default function TopNav() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            火焔土器\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nclass TategakiCard extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      mode: 'default'\r\n    }\r\n\r\n    this.emitter = this.props.emitter;\r\n    this.emitter.addListener(\r\n      'what_is_kaendoki', () => {\r\n        this.setState({\r\n          mode: 'what_is_kaendoki'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'feature_of_kaendoki', () => {\r\n        this.setState({\r\n          mode: 'feature_of_kaendoki'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'differences_of_kaendoki', () => {\r\n        this.setState({\r\n          mode: 'differences_of_kaendoki'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'joumon_culture', () => {\r\n        this.setState({\r\n          mode: 'joumon_culture'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'climate_of_joumon', () => {\r\n        this.setState({\r\n          mode: 'climate_of_joumon'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'village_of_joumon', () => {\r\n        this.setState({\r\n          mode: 'village_of_joumon'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'art_and_kaendoki', () => {\r\n        this.setState({\r\n          mode: 'art_and_kaendoki'\r\n        })\r\n      }\r\n    )\r\n\r\n    this.emitter.addListener(\r\n      'XVL', () => {\r\n        this.setState({\r\n          mode: 'XVL'\r\n        })\r\n      }\r\n    )\r\n\r\n\r\n\r\n    this.emitter.addListener(\r\n      'default', () => {\r\n        this.setState({\r\n          mode: 'default'\r\n        })\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.state.mode === 'what_is_kaendoki') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">１．火焔土器とは</p>\r\n            <p className=\"Tategaki--font__normal\">　「<ruby>火焔<rt>かえん</rt></ruby><ruby>土器<rt>どき</rt></ruby>」とは、1936年12月31日に<ruby>近藤<rt>こんどう</rt></ruby><ruby>篤三郎<rt>とくさぶろう</rt></ruby>氏によって現長岡市の<ruby>馬高<rt>うまたか</rt></ruby>遺跡で発見され、復元された土器のひとつに付けられた愛称。その形が燃え上がる焔に似ていたことから、この名称が生まれました。その後、火焔土器似た特徴を持つ土器が発見されるようになり、同様の土器を「火焔型土器」と呼ぶようになりました。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'feature_of_kaendoki') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">２．火焔型土器の特徴</p>\r\n            <p className=\"Tategaki--font__normal\">　火焔型土器の最大の特徴は、口縁部に付く<span class=\"highlight highlight--color__red\">鶏冠状把手</span>と<span class=\"highlight highlight--color__yellow\">鋸歯状突起</span>、そして原則として縄文を使用せず、隆線文と沈線文によって施された浮彫的な文様です。頸部と胴部上半部には<span class=\"highlight highlight--color__blue\">Ｓ字状隆線文</span>および渦巻き状隆線文、胴部下半部には逆Ｕ字状隆線文が描かれています。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'differences_of_kaendoki') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">３．火焔土器と火焔型土器の違い</p>\r\n            <p className=\"Tategaki--font__normal\">　「火焔土器」とは、1936年12月31日に近藤篤三郎氏によって現長岡市の馬高遺跡で発見され、復元された土器のひとつに付けられた愛称。その形が燃え上がる焔に似ていたことから、この名称が生まれました。その後、火焔土器と似た特徴を持つ土器が発見されるようになり、同様の土器を「火焔型土器」と呼ぶようになりました。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'joumon_culture') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">４．縄文文化の時代</p>\r\n            <p className=\"Tategaki--font__normal\">　縄文時代の終わりは今からおよそ2,900年前とされています。縄文時代は約1万年も継続した息の長い狩猟採集活動を中心とした時代だったのです。考古学では、この長い縄文時代の変化を理解するために、便宜的に、古いほうから草創期・早期・前期・中期・後期・晩期の6時期に区分しています。火焔型土器は、中期の中頃に作られました。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'climate_of_joumon') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">５．縄文時代の気候・環境</p>\r\n            <p className=\"Tategaki--font__normal\">　草創期の初頭は、氷河時代の終わりにあたり、まだまだ寒冷な気候でした。その後、草創期前半にはやや温暖化を始めますが、草創期後半には寒冷期と温暖期が交互に入れ替わる不安定な気候が続きます。火焔型土器が作られていた5,300年程前（中期の中頃）は、現在の気候に近く、新潟県信濃川沿岸には雪も降り、多雪地帯を形成していたようです。この温暖な気候は、後期に向けて寒冷化し、晩期になると現在の気候に近くなったと考えられています。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'village_of_joumon') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">６．縄文時代の村・家</p>\r\n            <p className=\"Tategaki--font__normal\">　火焔型土器の時代に営まれた拠点的な村は、ある一定の領域を確保しながら河川に近接する段丘などの平坦面に営まれています。典型的な拠点集落である馬高遺跡（新潟県長岡市）などの調査事例から、広場を囲み住居が放射状に分布する形態をとることが判明しています。このような形態を示す村を「環状集落」と呼びます。環状集落の広場には、墓穴と推定される浅い楕円形の土坑が分布することが多いようです。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'art_and_kaendoki') {\r\n      return (\r\n        <div>\r\n          <div className=\"Tategaki\">\r\n            <p className=\"Tategaki--font__title\">７．火焔型土器と芸術</p>\r\n            <p className=\"Tategaki--font__normal\">　「芸術は爆発だ」の発言で有名な芸術家の岡本太郎。彼は1951年に東京国立博物館で縄文土器を見て衝撃を受け、「なんだコレは！」と叫んだと言われています。翌年には美術雑誌「みずゑ」に「四次元との対話 - 縄文土器論」を発表。従来の考古学的な解釈ではなく、縄文人の宇宙観を土台とした社会学的、哲学的な解釈を行いました。そのことが後々建築やデザイン界を中心に反響を呼び、縄文ブームを起こしたのだとか。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else if (this.state.mode === 'XVL') {\r\n      return (\r\n        <div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n\r\n    else {\r\n      return (\r\n        <div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default TategakiCard\r\n","import React, { Component } from \"react\";\r\nimport {EventEmitter} from 'fbemitter'\r\nimport './App.css';\r\n\r\nimport Viewer from \"./Viewer\"\r\nimport BottomNav from \"./BottomNav\"\r\nimport TopNav from \"./TopNav\";\r\nimport TategakiCard from \"./TategakiCard\";\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.emitter = new EventEmitter()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{position: \"relative\"}}>\r\n        <TopNav emitter={this.emitter} />\r\n        <Viewer emitter={this.emitter} />\r\n        <BottomNav emitter={this.emitter} />\r\n        <TategakiCard emitter={this.emitter} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}